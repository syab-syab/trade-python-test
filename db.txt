データベーステーブル

テーブル : rate
id :　変更なし
base_currency_id : 基軸通貨コード(文字列)
                    関連付けるかも
payment_currency_id : 決済通貨コード(文字列)
                      関連付けるかも
rate_value : レート(数値か小数)
period_id(またはtag_id) : どの時点のレートか(today, yesterday, lastweek, とか数値ではなく文字列で)
                          関連付けるのが良いかも
※一応基準の通貨も(全部jpyだけど)


テーブル : currency
id : 特になし
name : 通貨コードの文字列(USD, EURなど)
        JPYを入れるかどうか迷う
※rateテーブルと関連付けるかも(不要ならこのテーブル自体作らない)
※base_currencyとpayment_currencyで分ける必要があるかどうかわからない

テーブル : rate_period
id : 特になし
period : todayやlastweek_average, lastmonth_averageなど
          そのレートがいつのものかを表す
※このテーブルも関連付ける必要がなければ作成しない





※1年前とか年単位の為替レートは年間の平均だからあらかじめ手動でデータベースに入れておく
　年号は例外で数値で入れた方が良いかも2021,2020とか

api
↓のいずれかのようにする

today : {
  usd : 0.0071,
  eur : 0.0065,
  ...
}

usd : {
  today : 0.0069,
  last_week_average : 0.0071,
  last_month_average : 0.0072,
  last_year_average : 0.0068,
  ....
}


supabase
全てのカラムにNOT NULL制約を付ける
関連付けはまだ必要かどうかわからない
create table trade_rate (
  id bigint generated by default as identity primary key,
  base_code text,
  payment_code text,
  rate_val float,
  rate_period text
);

┏━━━━━━━━━━━━━━━━━━━━━━┓
┃rate                  ┃
┣━━━━━━━━━━━━━┳━━━━━━━━┫
┃id           ┃int     ┃
┃base_code    ┃text    ┃
┃payment_code ┃text    ┃
┃rate_val     ┃float   ┃
┃rate_period  ┃text    ┃
┗━━━━━━━━━━━━━┻━━━━━━━━┛